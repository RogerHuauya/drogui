#include <arduinoFFT.h>

arduinoFFT FFT = arduinoFFT(); 

const uint16_t samples = 64;
uint8_t exponent;
float vReal[samples] = {
  -1.206984738114142,
  -0.861430769129782,
  -0.571163708077032,
  -0.338315246287939,
  -0.160053338440726,
  -0.035376882912830,
   0.032010343795822,
   0.036065959812097,
  -0.025340271253414,
  -0.143560484943528,
  -0.295589467482860,
  -0.446354712154815,
  -0.557098703026617,
  -0.597251178329893,
  -0.555443052954018,
  -0.445099445678312,
  -0.301812768008042,
  -0.172637924782266,
  -0.100576033229629,
  -0.109564582792670,
  -0.195403466470758,
  -0.326144934390374,
  -0.452191158937692,
  -0.522811090858954,
  -0.503449771856421,
  -0.387782927409367,
  -0.200274829265662,
   0.011650122872357,
   0.193093082529494,
   0.299369190773577,
   0.309814541807998,
   0.233080037552985,
   0.102422753689945,
  -0.036925430150226,
  -0.143519909168185,
  -0.192878139764221,
  -0.183565349589161,
  -0.134495310700540,
  -0.075007100857693,
  -0.031938642106391,
  -0.018729519621213,
  -0.030674978149203,
  -0.047827627920363,
  -0.044132169139877,
   0.001052795652433,
   0.093618663314760,
   0.221243364654621,
   0.357063666305302,
   0.469060394146920,
   0.531506275708994,
   0.534193277698118,
   0.486014194220259,
   0.411718063335711,
   0.343166133661794,
   0.308407526323032,
   0.322545732806121,
   0.383522837551148,
   0.474012477933972,
   0.568313633322941,
   0.641441813773204,
   0.677009688193054,
   0.671261369737887,
   0.632259519578583,
   0.575128661153650
  };
float vImag[samples];

unsigned long time;

void setup()
{
  Serial.begin(115200);
  while(!Serial);
  Serial.println("Ready");
  exponent = FFT.Exponent(samples);
}

void loop()
{
    for (uint16_t i = 0; i < samples; i++){
      vImag[i] = 0; 
    }
    time=millis();
    //FFT.Windowing(vReal, samples, FFT_WIN_TYP_HAMMING, FFT_FORWARD); 
    FFT.Compute(vReal, vImag, samples, exponent, FFT_FORWARD); 
    for(int i = 0; i< samples; i++){
      Serial.print('(');
      Serial.print(vReal[i]);
      Serial.print(',');
      Serial.print(vImag[i]);
      Serial.println(')');
    }
    FFT.ComplexToMagnitude(vReal, vImag, samples); 
    Serial.println("Magnitude");
    for(int i = 0; i< samples/2 + 1; i++){
      //Serial.print('(');
      Serial.print((i>0?2:1)*vReal[i]/samples,6);
      Serial.println(';');
    }
    while(1){};
}
